<?php

declare(strict_types=1);

/**
 * This file is part of the MultiFlexi package
 *
 * https://multiflexi.eu/
 *
 * (c) Vítězslav Dvořák <http://vitexsoftware.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

namespace MultiFlexi\Action;

/**
 * Description of Reschedule.
 *
 * @author vitex
 */
class Stop extends \MultiFlexi\CommonAction
{
    /**
     * Module Caption.
     *
     * @return string
     */
    public static function name()
    {
        return _('Stop');
    }

    /**
     * Module Description.
     *
     * @return string
     */
    public static function description()
    {
        return _('Stop periodical Task');
    }

    public static function logo()
    {
        return 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpuczE9Imh0dHA6Ly9zb3ppLmJhaWVyb3VnZS5mciIgaWQ9InN2ZzYzNjEiIHNvZGlwb2RpOmRvY25hbWU9InByb2Nlc3Mtc3RvcC5zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCIgc29kaXBvZGk6dmVyc2lvbj0iMC4zMiIgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiIGlua3NjYXBlOnZlcnNpb249IjAuNDYiIHNvZGlwb2RpOmRvY2Jhc2U9Ii9ob21lL2ppbW1hYy9nZngveGltaWFuL3RhbmdvLWljb24tdGhlbWUvc2NhbGFibGUvYWN0aW9ucyI+CiAgPGRlZnMgaWQ9ImRlZnMzIj4KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0icmFkaWFsR3JhZGllbnQyMTY1MCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGN5PSIzNi43NSIgY3g9IjI1LjEyNSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAuNTk1MjQgLTIuMzAwN2UtMTUgMTQuODc1KSIgcj0iMTUuNzUiIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyI+CiAgICAgIDxzdG9wIGlkPSJzdG9wMjE2NDYiIHN0eWxlPSJzdG9wLWNvbG9yOiMwMDAwMDAiIG9mZnNldD0iMCIvPgogICAgICA8c3RvcCBpZD0ic3RvcDIxNjQ4IiBzdHlsZT0ic3RvcC1jb2xvcjojMDAwMDAwO3N0b3Atb3BhY2l0eTowIiBvZmZzZXQ9IjEiLz4KICAgIDwvcmFkaWFsR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhckdyYWRpZW50MjA1NyIgeTI9IjQ3LjM3NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgyPSI1My41NyIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0yKSIgeTE9IjEyLjUwNCIgeDE9IjE1LjczNyIgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIj4KICAgICAgPHN0b3AgaWQ9InN0b3AxMTc4MiIgc3R5bGU9InN0b3AtY29sb3I6I2ZmOGI4YiIgb2Zmc2V0PSIwIi8+CiAgICAgIDxzdG9wIGlkPSJzdG9wMTE3ODQiIHN0eWxlPSJzdG9wLWNvbG9yOiNlYzFiMWIiIG9mZnNldD0iMSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyR3JhZGllbnQ0OTg3IiB5Mj0iMzcuOTYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4Mj0iNDEuMDQ4IiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTIpIiB5MT0iMjAuMTA1IiB4MT0iMjMuOTk2IiBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiPgogICAgICA8c3RvcCBpZD0ic3RvcDQ5ODMiIHN0eWxlPSJzdG9wLWNvbG9yOiNjYzAwMDAiIG9mZnNldD0iMCIvPgogICAgICA8c3RvcCBpZD0ic3RvcDQ5ODUiIHN0eWxlPSJzdG9wLWNvbG9yOiNiMzAwMDAiIG9mZnNldD0iMSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0icmFkaWFsR3JhZGllbnQyMjM5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3k9IjMzLjMwMiIgY3g9IjI0LjMwMiIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxLjY5NCAtNS43NzU3ZS0xNiA1Ljc3NTdlLTE2IDEuNjk0IC0xNi44NjUgLTI1LjExMSkiIHI9IjEyLjMwMiIgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIj4KICAgICAgPHN0b3AgaWQ9InN0b3A5NjQ5IiBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmIiBvZmZzZXQ9IjAiLz4KICAgICAgPHN0b3AgaWQ9InN0b3A5NjUxIiBzdHlsZT0ic3RvcC1jb2xvcjojZGJkYmRiIiBvZmZzZXQ9IjEiLz4KICAgIDwvcmFkaWFsR3JhZGllbnQ+CiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9InJhZGlhbEdyYWRpZW50MjI1NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGN5PSIxMC42NjYiIGN4PSIxNi43NSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCg0LjE1NSAtMi45NzkyZS0yNCAzLjI1NTdlLTI0IDMuMTk4NyAtNTIuODQ2IC0yMy41MDkpIiByPSIyMS4yNSIgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIj4KICAgICAgPHN0b3AgaWQ9InN0b3AyMjUwIiBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmIiBvZmZzZXQ9IjAiLz4KICAgICAgPHN0b3AgaWQ9InN0b3AyMjUyIiBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmO3N0b3Atb3BhY2l0eTowIiBvZmZzZXQ9IjEiLz4KICAgIDwvcmFkaWFsR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhckdyYWRpZW50MjI2MiIgeTI9IjM1LjA1MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgyPSIyNC4zMDIiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtMikiIHkxPSIxNS44MDIiIHgxPSIyMS43NSIgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIj4KICAgICAgPHN0b3AgaWQ9InN0b3AyMjU4IiBzdHlsZT0ic3RvcC1jb2xvcjojZmYwMjAyIiBvZmZzZXQ9IjAiLz4KICAgICAgPHN0b3AgaWQ9InN0b3AyMjYwIiBzdHlsZT0ic3RvcC1jb2xvcjojZmY5YjliIiBvZmZzZXQ9IjEiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcgaWQ9ImJhc2UiIGJvcmRlcmNvbG9yPSIjNjY2NjY2IiBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIiBpbmtzY2FwZTpndWlkZS1iYm94PSJ0cnVlIiBwYWdlY29sb3I9IiNmZmZmZmYiIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjY4OCIgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIiBpbmtzY2FwZTp6b29tPSI0IiBpbmtzY2FwZTp3aW5kb3cteD0iNDg4IiBzaG93Z3JpZD0iZmFsc2UiIGJvcmRlcm9wYWNpdHk9IjAuMTUyOTQxMTgiIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSIgaW5rc2NhcGU6Y3g9IjAuMDA3Mjc2IiBpbmtzY2FwZTpjeT0iNy4wNTQ0NTc2IiBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiIGlua3NjYXBlOndpbmRvdy15PSIxNjAiIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSJmYWxzZSIgaW5rc2NhcGU6d2luZG93LXdpZHRoPSI3ODYiIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiIHNob3dndWlkZXM9InRydWUiLz4KICA8ZyBpZD0ibGF5ZXIxIiBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciI+CiAgICA8cGF0aCBpZD0icGF0aDIxNjQyIiBzb2RpcG9kaTpyeD0iMTUuNzUiIHNvZGlwb2RpOnJ5PSI5LjM3NSIgc3R5bGU9Im9wYWNpdHk6LjYzMDY4O2ZpbGwtcnVsZTpldmVub2RkO2NvbG9yOiMwMDAwMDA7ZmlsbDp1cmwoI3JhZGlhbEdyYWRpZW50MjE2NTApIiBzb2RpcG9kaTp0eXBlPSJhcmMiIGQ9Im00MC44NzUgMzYuNzVhMTUuNzUgOS4zNzUgMCAxIDEgLTMxLjUgMCAxNS43NSA5LjM3NSAwIDEgMSAzMS41IDB6IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjE3MzggMCAwIDAuNiAtNS4yNjU5IDE5LjU3NSkiIHNvZGlwb2RpOmN5PSIzNi43NSIgc29kaXBvZGk6Y3g9IjI1LjEyNSIvPgogICAgPHBhdGggaWQ9InBhdGg5NDgwIiBzb2RpcG9kaTpub2RldHlwZXM9ImNjY2NjY2NjYyIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTojODYwMDAwO2ZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDQ5ODcpIiBkPSJtMTUuNTkxIDAuNDkxOTJoMTcuMDg1bDEyLjgyMiAxMy4wOTR2MTcuODk0bC0xMi42NDkgMTIuMDE3aC0xNy40M2wtMTIuOTI1LTEyLjgzOSAwLjAwMDQtMTcuMTk0IDEzLjA5Ny0xMi45NzJ6Ii8+CiAgICA8cGF0aCBpZD0icGF0aDk0ODIiIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjIiBzdHlsZT0ib3BhY2l0eTouODEzMTk7c3Ryb2tlOnVybCgjbGluZWFyR3JhZGllbnQyMDU3KTtmaWxsOm5vbmUiIGQ9Im0xNi4wMjEgMS41MDAzaDE2LjIyOGwxMi4yNDcgMTIuNDIzdjE3LjExNGwtMTEuODU4IDExLjQ1MWgtMTYuNzY4bC0xMi4zNjEtMTIuMjc5IDAuMDAwMS0xNi4zNjMgMTIuNTEyLTEyLjM0NnoiLz4KICAgIDxwYXRoIGlkPSJwYXRoMjI0MSIgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NjYyIgc3R5bGU9Im9wYWNpdHk6LjI4OTc3O2ZpbGwtcnVsZTpldmVub2RkO2ZpbGw6dXJsKCNyYWRpYWxHcmFkaWVudDIyNTQpIiBkPSJtMTUuNjg4IDAuNzVsLTEyLjkzOCAxMi44MTJ2MTdsMi45Mzc1IDIuOTA3YzE2Ljc2MiAwLjA1NyAxNi40NzgtMTMuMDE5IDM5LjU2Mi0xMS44NzV2LTcuOTA2bC0xMi42ODgtMTIuOTM4aC0xNi44NzR6Ii8+CiAgICA8cGF0aCBpZD0icGF0aDI3ODciIHN0eWxlPSJzdHJva2UtbGluZWpvaW46cm91bmQ7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOnVybCgjbGluZWFyR3JhZGllbnQyMjYyKTtzdHJva2UtbGluZWNhcDpyb3VuZDtmaWxsOnVybCgjcmFkaWFsR3JhZGllbnQyMjM5KSIgZD0ibTE2Ljc2NyAxMC41bC00LjI2NyA0LjI2NyA3LjUzNSA3LjUzNS03LjUzNSA3LjUzNSA0LjI2NyA0LjI2OCA3LjUzNS03LjUzNiA3LjUzNSA3LjUzNiA0LjI2OC00LjI2OC03LjUzNi03LjUzNSA3LjUzNi03LjUzNS00LjI2OC00LjI2Ny03LjUzNSA3LjUzNS03LjUzNS03LjUzNXoiLz4KICA8L2c+CiAgPG1ldGFkYXRhPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiLz4KICAgICAgICA8Y2M6bGljZW5zZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL3B1YmxpY2RvbWFpbi8iLz4KICAgICAgICA8ZGM6cHVibGlzaGVyPgogICAgICAgICAgPGNjOkFnZW50IHJkZjphYm91dD0iaHR0cDovL29wZW5jbGlwYXJ0Lm9yZy8iPgogICAgICAgICAgICA8ZGM6dGl0bGU+T3BlbmNsaXBhcnQ8L2RjOnRpdGxlPgogICAgICAgICAgPC9jYzpBZ2VudD4KICAgICAgICA8L2RjOnB1Ymxpc2hlcj4KICAgICAgICA8ZGM6dGl0bGU+dGFuZ28gcHJvY2VzcyBzdG9wPC9kYzp0aXRsZT4KICAgICAgICA8ZGM6ZGF0ZT4yMDEwLTAzLTI2VDE1OjMyOjMxPC9kYzpkYXRlPgogICAgICAgIDxkYzpkZXNjcmlwdGlvbj4iUHJvY2VzcyBzdG9wIiBpY29uIGZyb20gJmx0O2EgaHJlZj0iaHR0cDovL3RhbmdvLmZyZWVkZXNrdG9wLm9yZy9UYW5nb19EZXNrdG9wX1Byb2plY3QiJmd0OyBUYW5nbyBQcm9qZWN0ICZsdDsvYSZndDsgDVxuJmx0O2JyJmd0OyZsdDticiZndDsNXG5TaW5jZSB2ZXJzaW9uIDAuOC45MCBUYW5nbyBQcm9qZWN0IGljb25zIGFyZSBQdWJsaWMgRG9tYWluOiAmbHQ7YSBocmVmPSJodHRwOi8vdGFuZ28uZnJlZWRlc2t0b3Aub3JnL0ZyZXF1ZW50bHlfQXNrZWRfUXVlc3Rpb25zI1Rlcm1zX29mX1VzZS4zRiImZ3Q7IFRhbmdvIFByb2plY3QgRkFRICZsdDsvYSZndDs8L2RjOmRlc2NyaXB0aW9uPgogICAgICAgIDxkYzpzb3VyY2U+aHR0cHM6Ly9vcGVuY2xpcGFydC5vcmcvZGV0YWlsLzM0MjY3L3RhbmdvLXByb2Nlc3Mtc3RvcC1ieS13YXJzemF3aWFua2E8L2RjOnNvdXJjZT4KICAgICAgICA8ZGM6Y3JlYXRvcj4KICAgICAgICAgIDxjYzpBZ2VudD4KICAgICAgICAgICAgPGRjOnRpdGxlPndhcnN6YXdpYW5rYTwvZGM6dGl0bGU+CiAgICAgICAgICA8L2NjOkFnZW50PgogICAgICAgIDwvZGM6Y3JlYXRvcj4KICAgICAgICA8ZGM6c3ViamVjdD4KICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICA8cmRmOmxpPmNyb3NzPC9yZGY6bGk+CiAgICAgICAgICAgIDxyZGY6bGk+ZXh0ZXJuYWxzb3VyY2U8L3JkZjpsaT4KICAgICAgICAgICAgPHJkZjpsaT5pY29uPC9yZGY6bGk+CiAgICAgICAgICAgIDxyZGY6bGk+cHJvY2VzczwvcmRmOmxpPgogICAgICAgICAgICA8cmRmOmxpPnJlZDwvcmRmOmxpPgogICAgICAgICAgICA8cmRmOmxpPnNpZ248L3JkZjpsaT4KICAgICAgICAgICAgPHJkZjpsaT5zdG9wPC9yZGY6bGk+CiAgICAgICAgICAgIDxyZGY6bGk+c3ltYm9sPC9yZGY6bGk+CiAgICAgICAgICAgIDxyZGY6bGk+dGFuZ288L3JkZjpsaT4KICAgICAgICAgIDwvcmRmOkJhZz4KICAgICAgICA8L2RjOnN1YmplY3Q+CiAgICAgIDwvY2M6V29yaz4KICAgICAgPGNjOkxpY2Vuc2UgcmRmOmFib3V0PSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9wdWJsaWNkb21haW4vIj4KICAgICAgICA8Y2M6cGVybWl0cyByZGY6cmVzb3VyY2U9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zI1JlcHJvZHVjdGlvbiIvPgogICAgICAgIDxjYzpwZXJtaXRzIHJkZjpyZXNvdXJjZT0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjRGlzdHJpYnV0aW9uIi8+CiAgICAgICAgPGNjOnBlcm1pdHMgcmRmOnJlc291cmNlPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyNEZXJpdmF0aXZlV29ya3MiLz4KICAgICAgPC9jYzpMaWNlbnNlPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CjxzY3JpcHQgeG1sbnM9IiIvPjwvc3ZnPg==';
    }

    /**
     * Perform Action.
     */
    public function perform(): void
    {
        if ($this->job->runTemplate->setState(false)) {
            $this->addStatusMessage(sprintf(_('Periodic executing of «%s» for ❮%s❯ stop 🛑'), $this->job->application->getRecordName(), $this->job->company->getRecordName()), 'success');
        } else {
            $this->addStatusMessage(_('Stopped module failed'), 'error');
        }
    }

    /**
     * Is this Action Situable for Application.
     *
     * @param Application $app
     */
    public static function usableForApp($app): bool
    {
        return true;
    }
}
